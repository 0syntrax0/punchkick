function isIE() {var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);} var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);} var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);} return false;} if(!Array.from){Array.from=(function(){var toStr=Object.prototype.toString;var isCallable=function(fn){return typeof fn==='function'||toStr.call(fn)==='[object Function]';};var toInteger=function(value){var number=Number(value);if(isNaN(number)){return 0;} if(number===0||!isFinite(number)){return number;} return(number>0?1:-1)*Math.floor(Math.abs(number));};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger);};return function from(arrayLike){var C=this;var items=Object(arrayLike);if(arrayLike==null){throw new TypeError("Array.from requires an array-like object - not null or undefined");} var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!=='undefined'){if(!isCallable(mapFn)){throw new TypeError('Array.from: when provided, the second argument must be a function');} if(arguments.length>2){T=arguments[2];}} var len=toLength(items.length);var A=isCallable(C)?Object(new C(len)):new Array(len);var k=0;var kValue;while(k<len){kValue=items[k];if(mapFn){A[k]=typeof T==='undefined'?mapFn(kValue,k):mapFn.call(T,kValue,k);}else{A[k]=kValue;} k+=1;} A.length=len;return A;};}());} if(!isIE()) {var data=(localStorage.getItem('todoList'))?JSON.parse(localStorage.getItem('todoList')):{todo:[],dateAdded:[],completed:[]};renderTodoList();} function renderTodoList() {if(!data.todo.length&&!data.dateAdded.length)return;for(let i=0;i<data.todo.length;i++) {addItemToDOM(data.todo[i],data.dateAdded[i],data.completed[i]);}} document.getElementById('todoList').addEventListener('click',function(e){if(e.target.classList.toggle('checked')) updateItem('completed',e.target.id);else updateItem('uncompleted',e.target.id);toggleFilters(getCurrentFilter());});document.getElementById('addToList').addEventListener('click',function(){let value=document.getElementById("myInput").value;if(value) {addItem(value);document.getElementById("myInput").value='';toggleFilters(getCurrentFilter());}});function addItem(value) {let dateAdded=Math.round((new Date()).getTime()/1000);addItemToDOM(value,dateAdded,'-');if(!isIE()) {data.todo.push(value);data.dateAdded.push(dateAdded);data.completed.push('-');dataObjectUpdated();}} function dataObjectUpdated() {if(!isIE()) {localStorage.setItem('todoList',JSON.stringify(data));}} function removeItem() {let parent=this.parentNode.parentNode;let item=this.parentElement;let dateAdded=parseInt(this.parentNode.id);let keyToRemove=data.dateAdded.indexOf(dateAdded);if(keyToRemove>-1) {parent.removeChild(item);data.todo.splice(keyToRemove,1);data.dateAdded.splice(keyToRemove,1);} dataObjectUpdated();} function updateItem(todo,_dateAdded) {if(!isIE()) {let dateAdded=parseInt(_dateAdded);let keyToChange=data.dateAdded.indexOf(dateAdded);if(keyToChange>-1) {switch(todo){case'uncompleted':data.completed.splice(keyToChange,1,'-');break;case'completed':data.completed.splice(keyToChange,1,dateAdded);break;default:return;break;} dataObjectUpdated();}}} function addItemToDOM(text,UNIXdateAdded,completedCheck) {let list=document.getElementById('todoList');let item=document.createElement('li');let isCompleted=completedCheck!=='-';item.innerText=text;item.setAttribute('id',UNIXdateAdded);item.setAttribute('dateAdded',UNIXdateAdded);if(isCompleted) {item.className='checked';} let dateCreated=document.createElement('span');let readableDate='Added: '+timeConverter(UNIXdateAdded);let addedDate=document.createTextNode(readableDate);dateCreated.className='dateAdded';dateCreated.appendChild(addedDate);item.appendChild(dateCreated);let remove=document.createElement('span');let txt=document.createTextNode("\u00D7");remove.className='close';remove.appendChild(txt);item.appendChild(remove);remove.addEventListener('click',removeItem);list.insertBefore(item,list.childNodes[0]);} function timeConverter(UNIX_timestamp){var a=new Date(UNIX_timestamp*1000);var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var year=a.getFullYear();var month=months[a.getMonth()];var date=a.getDate();var hour=a.getHours();var min=a.getMinutes();var sec=a.getSeconds();var time=month+' '+date+', '+year+' '+hour+':'+min+':'+sec;return time;} document.getElementById('sortByAlphabetically').addEventListener('click',function(){let list,i,switching,b,shouldSwitch,dir,switchcount=0,btnElement=document.getElementById('sortByAlphabetically'),btnText=btnElement.textContent||btnElement.innerText;list=document.getElementById('todoList');switching=true;if(btnText=='Sort By Alphabetically [a-z]') document.getElementById('sortByAlphabetically').innerText='Sort By Alphabetically [z-a]';else document.getElementById('sortByAlphabetically').innerText='Sort By Alphabetically [a-z]';dir="asc";while(switching) {switching=false;b=list.getElementsByTagName('li');for(i=0;i<(b.length-1);i++) {shouldSwitch=false;if(dir=="asc") {if(b[i].innerHTML.toLowerCase()>b[i+1].innerHTML.toLowerCase()) {shouldSwitch=true;break;}} else if(dir=="desc") {if(b[i].innerHTML.toLowerCase()<b[i+1].innerHTML.toLowerCase()) {shouldSwitch=true;break;}}} if(shouldSwitch) {b[i].parentNode.insertBefore(b[i+1],b[i]);switching=true;switchcount++;} else {if(switchcount==0&&dir=="asc") {dir="desc";switching=true;}}}});var sortUp=true;document.getElementById('sortByDateAdded').addEventListener("click",function(e){let sortList=Array.prototype.slice.call(document.querySelectorAll('#todoList li'));if(sortUp===true) {document.getElementById('sortByDateAdded').innerText="Sort By Date Added u2191";sortList.sort(function(a,b){return a.getAttribute('dateadded').localeCompare(b.getAttribute('dateadded'));}).forEach(function(currValue){currValue.parentNode.appendChild(currValue);});sortUp=false;} else {document.getElementById('sortByDateAdded').innerText="Sort By Date Added u2193";sortList.reverse(function(a,b){return a.getAttribute('dateadded').localeCompare(b.getAttribute('dateadded'));}).forEach(function(currValue){currValue.parentNode.appendChild(currValue);});sortUp=true;}});function toggleFilters(todo) {let lis=document.getElementsByTagName('li');var filterOption=(typeof(todo)==='object')?todo.target.id:todo;switch(filterOption) {case'showComplete':toggleFilters('showAll');for(let i=0;i<lis.length;i++) {if(!lis[i].classList.contains('checked')) {let li=this.parentElement;lis[i].style.display='none';}} break;case'showIncomplete':toggleFilters('showAll');for(let i=0;i<lis.length;i++) {if(lis[i].classList.contains('checked')) {let li=this.parentElement;lis[i].style.display='none';}} break;default:for(let i=0;i<lis.length;i++) {let li=this.parentElement;lis[i].style.display='block';} break;}} let classname=document.getElementsByClassName('filter');Array.from(classname).forEach(function(e){e.addEventListener('click',toggleFilters);});function getCurrentFilter() {return document.querySelector('input[name="filter"]:checked').value;}